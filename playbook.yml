---
- name: Hello Ansible - quick start
  hosts: all
  user: vagrant

  tasks:
    - name: install packages
      become: yes
      apt: name={{item}} update_cache=yes
      with_items:
        - git
        - build-essential
        - tmux
        - vim-gnome
        - zsh

    - name: install dein.vim
      shell: |
        curl https://raw.githubusercontent.com/Shougo/dein.vim/master/bin/installer.sh > installer.sh
        sh ./installer.sh .

    - name: .vimrc
      get_url:
        url=https://raw.githubusercontent.com/naofumi-fujii/dotfiles/master/.vimrc dest=/home/vagrant/.vimrc

    - name: update dein.vim setting
      shell: |
        sed -i -e "s/\/Users\/naofumi.fujii\//\/home\/vagrant\//g" .vimrc

    - name: .zshrc
      get_url:
        url=https://gist.githubusercontent.com/naofumi-fujii/93ac09a76d2575d449aa27e90b0513fe/raw/9acc71cd683504d424070439863ce6987461dea0/.zshrc dest=/home/vagrant/.zshrc

    - name: set zsh as default shell for vagrant user
      become: yes
      command: chsh -s '/usr/bin/zsh' vagrant

    - name: .tmux.conf
      get_url:
        url=https://raw.githubusercontent.com/naofumi-fujii/dotfiles/master/.tmux.conf dest=/home/vagrant/.tmux.conf

    - name: git alias
      shell: |
        git config --global alias.st status
